<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Detect frequency range on wave objects — freq_range_detec • warbleR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Detect frequency range on wave objects — freq_range_detec"><meta name="description" content="freq_range_detec detects the frequency range of acoustic signals on wave objects."><meta property="og:description" content="freq_range_detec detects the frequency range of acoustic signals on wave objects."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">warbleR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.32</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/warbleR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>vignettes</h6></li>
    <li><a class="dropdown-item" href="../articles/annotation_data_format.html">Annotation data format</a></li>
    <li><a class="dropdown-item" href="../articles/warbleR_workflow_01.html">Import sound files and select signals</a></li>
    <li><a class="dropdown-item" href="../articles/warbleR_workflow_02.html">Visual inspection and signal classification</a></li>
    <li><a class="dropdown-item" href="../articles/warbleR_workflow_03.html">Acoustic (dis)similarity, coordinated singing and simulating songs</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/maRce10/warbleR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Detect frequency range on wave objects</h1>
      <small class="dont-index">Source: <a href="https://github.com/maRce10/warbleR/blob/master/R/freq_range_detec.R" class="external-link"><code>R/freq_range_detec.R</code></a></small>
      <div class="d-none name"><code>freq_range_detec.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>freq_range_detec</code> detects the frequency range of acoustic signals on wave objects.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">freq_range_detec</span><span class="op">(</span></span>
<span>  <span class="va">wave</span>,</span>
<span>  wl <span class="op">=</span> <span class="fl">512</span>,</span>
<span>  fsmooth <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  dB.threshold <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  wn <span class="op">=</span> <span class="st">"hanning"</span>,</span>
<span>  flim <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fast.spec <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  ovlp <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  pal <span class="op">=</span> <span class="va">reverse.gray.colors.2</span>,</span>
<span>  widths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>  main <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  all.detec <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-wave">wave<a class="anchor" aria-label="anchor" href="#arg-wave"></a></dt>
<dd><p>A 'wave' object produced by  <code><a href="https://rdrr.io/pkg/tuneR/man/readWave.html" class="external-link">readWave</a></code> or similar functions.</p></dd>


<dt id="arg-wl">wl<a class="anchor" aria-label="anchor" href="#arg-wl"></a></dt>
<dd><p>A numeric vector of length 1 specifying the window length of the spectrogram, default
is 512. This is used for calculating the frequency spectrum (using <code><a href="https://rdrr.io/pkg/seewave/man/meanspec.html" class="external-link">meanspec</a></code>)
and producing the spectrogram (using <code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code>, if <code>plot = TRUE</code>).</p></dd>


<dt id="arg-fsmooth">fsmooth<a class="anchor" aria-label="anchor" href="#arg-fsmooth"></a></dt>
<dd><p>A numeric vector of length 1 to smooth the frequency spectrum with a mean
sliding window in kHz. This help to average amplitude "hills" to minimize the effect of
amplitude modulation. Default is 0.1.</p></dd>


<dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>Amplitude threshold (%) for frequency range detection. The frequency range (not the cumulative amplitude) is represented as percentage (100% = highest amplitude). Default is 10. Ignored if 'dB.threshold' is supplied.</p></dd>


<dt id="arg-db-threshold">dB.threshold<a class="anchor" aria-label="anchor" href="#arg-db-threshold"></a></dt>
<dd><p>Amplitude threshold for frequency range detection (in dB). The
value indicates the decrease in dB in relation to the highest amplitude (e.g.
the peak frequency) in which range will be detected. For instance a
<code>dB.threshold = 20</code> means that the amplitude threshold would be 20 dB below
the highest amplitude. If provided 'threshold' is ignored. Default is <code>NULL</code>.
Note that the power spectrum is normalized when using a dB scale, so it looks different than the one produced when no dB scale is used (e.g. when using 'threshold' argument).</p></dd>


<dt id="arg-wn">wn<a class="anchor" aria-label="anchor" href="#arg-wn"></a></dt>
<dd><p>Character vector of length 1 specifying window name. Default is
"hanning". See function <code><a href="https://rdrr.io/pkg/seewave/man/ftwindow.html" class="external-link">ftwindow</a></code> for more options. This is used for calculating the frequency spectrum (using <code><a href="https://rdrr.io/pkg/seewave/man/meanspec.html" class="external-link">meanspec</a></code>) and producing the spectrogram (using <code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code>, if <code>plot = TRUE</code>).</p></dd>


<dt id="arg-flim">flim<a class="anchor" aria-label="anchor" href="#arg-flim"></a></dt>
<dd><p>A numeric vector of length 2 for the frequency limit of
the spectrogram (in kHz), as in <code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code>. Default is <code>NULL</code>.</p></dd>


<dt id="arg-bp">bp<a class="anchor" aria-label="anchor" href="#arg-bp"></a></dt>
<dd><p>A numeric vector of length 2 for the lower and upper limits of a
frequency bandpass filter (in kHz) or "frange" to indicate that values in 'bottom.freq'
and 'top.freq' columns will be used as bandpass limits. Default is <code>NULL</code>.</p></dd>


<dt id="arg-fast-spec">fast.spec<a class="anchor" aria-label="anchor" href="#arg-fast-spec"></a></dt>
<dd><p>Logical. If <code>TRUE</code> then image function is used internally to create spectrograms, which substantially
increases performance (much faster), although some options become unavailable, as collevels, and sc (amplitude scale).
This option is indicated for signals with high background noise levels. Palette colors <code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">gray.1</a></code>, <code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">gray.2</a></code>,
<code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">gray.3</a></code>, <code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">topo.1</a></code> and <code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">rainbow.1</a></code> (which should be imported from the package monitoR) seem
to work better with 'fast.spec' spectrograms. Palette colors <code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">gray.1</a></code>, <code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">gray.2</a></code>,
<code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">gray.3</a></code> offer
decreasing darkness levels.</p></dd>


<dt id="arg-ovlp">ovlp<a class="anchor" aria-label="anchor" href="#arg-ovlp"></a></dt>
<dd><p>Numeric vector of length 1 specifying % of overlap between two
consecutive windows, as in <code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code>. Default is 50. This is used for calculating the frequency spectrum (using <code><a href="https://rdrr.io/pkg/seewave/man/meanspec.html" class="external-link">meanspec</a></code>) and producing the spectrogram (using <code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code>, if <code>plot = TRUE</code>).</p></dd>


<dt id="arg-pal">pal<a class="anchor" aria-label="anchor" href="#arg-pal"></a></dt>
<dd><p>Color palette function for spectrogram. Default is reverse.gray.colors.2. See
<code><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></code> for more palettes. Palettes as <code><a href="https://rdrr.io/pkg/monitoR/man/specCols.html" class="external-link">gray.2</a></code> may work better when <code>fast.spec = TRUE</code>.</p></dd>


<dt id="arg-widths">widths<a class="anchor" aria-label="anchor" href="#arg-widths"></a></dt>
<dd><p>Numeric vector of length 2 to control the relative widths of the spectro (first element) and spectrum (second element).</p></dd>


<dt id="arg-main">main<a class="anchor" aria-label="anchor" href="#arg-main"></a></dt>
<dd><p>Character vector of length 1 specifying the plot title. Default is <code>NULL</code>.</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p>Logical. Controls whether an image file is produced for each selection (in the
working directory). Default is <code>TRUE</code>.</p></dd>


<dt id="arg-all-detec">all.detec<a class="anchor" aria-label="anchor" href="#arg-all-detec"></a></dt>
<dd><p>Logical. If <code>TRUE</code> returns the start and end of all detected amplitude
"hills". Otherwise only the range is returned. Default is <code>FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with 2 columns for low and high frequency values. A plot is produced (in the graphic device) if <code>plot = TRUE</code> (see details).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This functions aims to automatize the detection of frequency ranges. The frequency range is calculated as follows:</p><ul><li><p>bottom.freq = the start frequency of the amplitude 'hill' containing the highest amplitude at the given threshold.</p></li>
<li><p>top.freq = the end frequency of the amplitude 'hill' containing the highest amplitude at the given threshold.</p></li>
</ul><p>If <code>plot = TRUE</code> a graph including a spectrogram and a frequency spectrum is
  produced in the graphic device. The graph would include gray areas in the frequency ranges excluded by the bandpass ('bp' argument), dotted lines highlighting the detected range.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Araya-Salas, M., &amp; Smith-Vidaurre, G. (2017). warbleR: An R package to streamline analysis of animal acoustic signals. Methods in Ecology and Evolution, 8(2), 184-191.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="freq_range.html">freq_range</a></code>, <code><a href="freq_ts.html">freq_ts</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">tico</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">freq_range_detec</span><span class="op">(</span></span></span>
<span class="r-in"><span>    wave <span class="op">=</span> <span class="va">tico</span>, wl <span class="op">=</span> <span class="fl">512</span>, fsmooth <span class="op">=</span> <span class="fl">0.01</span>, threshold <span class="op">=</span> <span class="fl">1</span>, bp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">8</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    widths <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sheep</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">freq_range_detec</span><span class="op">(</span></span></span>
<span class="r-in"><span>    wave <span class="op">=</span> <span class="va">sheep</span>, wl <span class="op">=</span> <span class="fl">512</span>, fsmooth <span class="op">=</span> <span class="fl">0.2</span>, threshold <span class="op">=</span> <span class="fl">50</span>, bp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1.5</span><span class="op">)</span>, pal <span class="op">=</span> <span class="va">reverse.heat.colors</span>, main <span class="op">=</span> <span class="st">"sheep"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-plt img"><img src="freq_range_detec-1.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="freq_range_detec-2.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   bottom.freq  top.freq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0.467689 0.6808449</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marcelo Araya-Salas, Grace Smith-Vidaurre.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

