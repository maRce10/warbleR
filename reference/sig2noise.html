<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Measure signal-to-noise ratio — sig2noise • warbleR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Measure signal-to-noise ratio — sig2noise"><meta name="description" content="sig2noise measures signal-to-noise ratio across multiple files."><meta property="og:description" content="sig2noise measures signal-to-noise ratio across multiple files."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">warbleR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.31</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/warbleR.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>vignettes</h6></li>
    <li><a class="dropdown-item" href="../articles/annotation_data_format.html">Annotation data format</a></li>
    <li><a class="dropdown-item" href="../articles/warbleR_workflow_01.html">Import sound files and select signals</a></li>
    <li><a class="dropdown-item" href="../articles/warbleR_workflow_02.html">Visual inspection and signal classification</a></li>
    <li><a class="dropdown-item" href="../articles/warbleR_workflow_03.html">Acoustic (dis)similarity, coordinated singing and simulating songs</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/maRce10/warbleR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Measure signal-to-noise ratio</h1>
      <small class="dont-index">Source: <a href="https://github.com/maRce10/warbleR/blob/master/R/sig2noise.R" class="external-link"><code>R/sig2noise.R</code></a></small>
      <div class="d-none name"><code>sig2noise.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>sig2noise</code> measures signal-to-noise ratio across multiple files.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">sig2noise</span><span class="op">(</span></span>
<span>  <span class="va">X</span>,</span>
<span>  <span class="va">mar</span>,</span>
<span>  parallel <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pb <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  type <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  eq.dur <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  in.dB <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  before <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  lim.dB <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  bp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  wl <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-x">X<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>object of class 'selection_table', 'extended_selection_table' or any data frame with columns
for sound file name (sound.files), selection number (selec), and start and end time of signal
(start and end).</p></dd>


<dt id="arg-mar">mar<a class="anchor" aria-label="anchor" href="#arg-mar"></a></dt>
<dd><p>numeric vector of length 1. Specifies the margins adjacent to
the start and end points of selection over which to measure noise.</p></dd>


<dt id="arg-parallel">parallel<a class="anchor" aria-label="anchor" href="#arg-parallel"></a></dt>
<dd><p>Numeric. Controls whether parallel computing is applied.
It specifies the number of cores to be used. Default is 1 (i.e. no parallel computing). It can also be
set globally using the 'parallel' option (see <code><a href="warbleR_options.html">warbleR_options</a></code>).</p></dd>


<dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>Character string containing the directory path where the sound files are located.
If <code>NULL</code> (default) then the current working directory is used. It can also be
set globally using the 'wav.path' option (see <code><a href="warbleR_options.html">warbleR_options</a></code>).</p></dd>


<dt id="arg-pb">pb<a class="anchor" aria-label="anchor" href="#arg-pb"></a></dt>
<dd><p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>. It can also be
set globally using the 'pb' option (see <code><a href="warbleR_options.html">warbleR_options</a></code>).</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>Numeric. Determine the formula to be used to calculate the signal-to-noise ratio (S = signal
, N = background noise):</p><ul><li><p><code>1</code>: ratio of S mean amplitude envelope to
  N mean amplitude envelope (<code>mean(env(S))/mean(env(N))</code>)</p></li>
<li><p><code>2</code>: ratio of S amplitude envelope RMS (root mean square) to N amplitude envelope RMS
 (<code>rms(env(S))/rms(env(N))</code>)</p></li>
<li><p><code>3</code>: ratio of the difference between S amplitude envelope RMS and N amplitude envelope RMS to N amplitude envelope RMS (<code>(rms(env(S)) - rms(env(N)))/rms(env(N))</code>)</p></li>
</ul></dd>


<dt id="arg-eq-dur">eq.dur<a class="anchor" aria-label="anchor" href="#arg-eq-dur"></a></dt>
<dd><p>Logical. Controls whether the noise segment that is measured has the same duration
than the signal (if <code>TRUE</code>, default <code>FALSE</code>). If <code>TRUE</code> then 'mar' argument is ignored.</p></dd>


<dt id="arg-in-db">in.dB<a class="anchor" aria-label="anchor" href="#arg-in-db"></a></dt>
<dd><p>Logical. Controls whether the signal-to-noise ratio is returned in decibels (20*log10(SNR)).
Default is <code>TRUE</code>.</p></dd>


<dt id="arg-before">before<a class="anchor" aria-label="anchor" href="#arg-before"></a></dt>
<dd><p>Logical. If <code>TRUE</code> noise is only measured right before the signal (instead of before and after). Default is <code>FALSE</code>.</p></dd>


<dt id="arg-lim-db">lim.dB<a class="anchor" aria-label="anchor" href="#arg-lim-db"></a></dt>
<dd><p>Logical. If <code>TRUE</code> the lowest signal-to-noise would be limited to -40 dB (if <code>in.dB = TRUE</code>). This would remove NA's that can be produced when noise segments have a higher amplitude than the signal
itself. Default is <code>TRUE</code>.</p></dd>


<dt id="arg-bp">bp<a class="anchor" aria-label="anchor" href="#arg-bp"></a></dt>
<dd><p>Numeric vector of length 2 giving the lower and upper limits of a frequency bandpass filter (in kHz). Default is <code>NULL</code>.</p></dd>


<dt id="arg-wl">wl<a class="anchor" aria-label="anchor" href="#arg-wl"></a></dt>
<dd><p>A numeric vector of length 1 specifying the window length of the spectrogram for applying bandpass. Default
  is 10. Ignored if <code>bp = NULL</code>. It can also be
set globally using the 'wl' option (see <code><a href="warbleR_options.html">warbleR_options</a></code>).
 Note that lower values will increase time resolution, which is more important for signal-to-noise ratio calculations.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>The input 'X' object with a new column including the signal-to-noise values.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Signal-to-noise ratio (SNR) is a measure of the level of a desired signal compared to
 background noise. The function divides the mean amplitude of the signal by
  the mean amplitude of the background noise adjacent to the signal.
  A general margin to apply before and after the acoustic signal must
  be specified. Setting margins for individual signals that have been
  previously clipped from larger files may take some optimization, as
  for calls within a larger file that are irregularly separated. When
  margins overlap with another acoustic signal nearby, the signal-to-noise
  ratio (SNR) will be inaccurate. Any SNR less than or equal to one suggests
  background noise is equal to or overpowering the acoustic signal.
  <code><a href="snr_spectrograms.html">snr_spectrograms</a></code> can be used to troubleshoot different noise margins.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Araya-Salas, M., &amp; Smith-Vidaurre, G. (2017). warbleR: An R package to streamline analysis of animal acoustic signals. Methods in Ecology and Evolution, 8(2), 184-191.
<a href="https://en.wikipedia.org/wiki/Signal-to-noise_ratio" class="external-link">Wikipedia: Signal-to-noise ratio</a></p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>) and Grace Smith Vidaurre</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Phae.long1"</span>, <span class="st">"lbh_selec_table"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/tuneR/man/writeWave.html" class="external-link">writeWave</a></span><span class="op">(</span><span class="va">Phae.long1</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"Phae.long1.wav"</span><span class="op">)</span><span class="op">)</span> <span class="co"># save sound files</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># specifying the correct margin is important</span></span></span>
<span class="r-in"><span>  <span class="co"># use snr_spectrograms to troubleshoot margins for sound files</span></span></span>
<span class="r-in"><span>  <span class="fu">sig2noise</span><span class="op">(</span><span class="va">lbh_selec_table</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"Phae.long1"</span>, <span class="va">lbh_selec_table</span><span class="op">$</span><span class="va">sound.files</span><span class="op">)</span>, <span class="op">]</span>,</span></span>
<span class="r-in"><span>    mar <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>    path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># this smaller margin doesn't overlap neighboring signals</span></span></span>
<span class="r-in"><span>  <span class="fu">sig2noise</span><span class="op">(</span><span class="va">lbh_selec_table</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"Phae.long1"</span>, <span class="va">lbh_selec_table</span><span class="op">$</span><span class="va">sound.files</span><span class="op">)</span>, <span class="op">]</span>,</span></span>
<span class="r-in"><span>    mar <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>    path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      sound.files channel selec     start       end bottom.freq top.freq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Phae.long1.wav       1     1 1.1693549 1.3423884    2.220105 8.604378</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Phae.long1.wav       1     2 2.1584085 2.3214565    2.169437 8.807053</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Phae.long1.wav       1     3 0.3433366 0.5182553    2.218294 8.756604</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        SNR</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 23.55816</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 22.81263</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 21.12933</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marcelo Araya-Salas, Grace Smith-Vidaurre.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

