<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Measure signal-to-noise ratio — sig2noise • warbleR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Measure signal-to-noise ratio — sig2noise"><meta property="og:description" content="sig2noise measures signal-to-noise ratio across multiple files."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">warbleR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.27</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="divider">
    <li class="dropdown-header">vignettes</li>
    <li>
      <a href="../articles/Intro_to_warbleR.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;Introduction to warbleR&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
    <li>
      <a href="../articles/warbleR_workflow_01.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Import sound files and select signals&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
    <li>
      <a href="../articles/warbleR_workflow_02.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Visual inspection and signal classification&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
    <li>
      <a href="../articles/warbleR_workflow_03.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Acoustic (dis)similarity, coordinated singing and simulating songs&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/maRce10/warbleR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Measure signal-to-noise ratio</h1>
    <small class="dont-index">Source: <a href="https://github.com/maRce10/warbleR/blob/HEAD/R/sig2noise.R" class="external-link"><code>R/sig2noise.R</code></a></small>
    <div class="hidden name"><code>sig2noise.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>sig2noise</code> measures signal-to-noise ratio across multiple files.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">sig2noise</span><span class="op">(</span><span class="va">X</span>, <span class="va">mar</span>, parallel <span class="op">=</span> <span class="fl">1</span>, path <span class="op">=</span> <span class="cn">NULL</span>, pb <span class="op">=</span> <span class="cn">TRUE</span>, type <span class="op">=</span> <span class="fl">1</span>, eq.dur <span class="op">=</span> <span class="cn">FALSE</span>,
in.dB <span class="op">=</span> <span class="cn">TRUE</span>, before <span class="op">=</span> <span class="cn">FALSE</span>, lim.dB <span class="op">=</span> <span class="cn">TRUE</span>, bp <span class="op">=</span> <span class="cn">NULL</span>, wl <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>X</dt>
<dd><p>object of class 'selection_table', 'extended_selection_table' or any data frame with columns
for sound file name (sound.files), selection number (selec), and start and end time of signal
(start and end).</p></dd>


<dt>mar</dt>
<dd><p>numeric vector of length 1. Specifies the margins adjacent to
the start and end points of selection over which to measure noise.</p></dd>


<dt>parallel</dt>
<dd><p>Numeric. Controls whether parallel computing is applied.
It specifies the number of cores to be used. Default is 1 (i.e. no parallel computing). It can also be
set globally using the 'parallel' option (see <code><a href="warbleR_options.html">warbleR_options</a></code>).</p></dd>


<dt>path</dt>
<dd><p>Character string containing the directory path where the sound files are located.
If <code>NULL</code> (default) then the current working directory is used. It can also be
set globally using the 'wav.path' option (see <code><a href="warbleR_options.html">warbleR_options</a></code>).</p></dd>


<dt>pb</dt>
<dd><p>Logical argument to control if progress bar is shown. Default is <code>TRUE</code>. It can also be
set globally using the 'pb' option (see <code><a href="warbleR_options.html">warbleR_options</a></code>).</p></dd>


<dt>type</dt>
<dd><p>Numeric. Determine the formula to be used to calculate the signal-to-noise ratio (S = signal
, N = background noise):</p><ul><li><p><code>1</code>: ratio of S mean amplitude envelope to 
  N mean amplitude envelope (<code>mean(env(S))/mean(env(N))</code>)</p></li>
<li><p><code>2</code>: ratio of S amplitude envelope RMS (root mean square) to N amplitude envelope RMS
 (<code>rms(env(S))/rms(env(N))</code>)</p></li>
<li><p><code>3</code>: ratio of the difference between S amplitude envelope RMS and N amplitude envelope RMS to N amplitude envelope RMS (<code>(rms(env(S)) - rms(env(N)))/rms(env(N))</code>)</p></li>
</ul></dd>


<dt>eq.dur</dt>
<dd><p>Logical. Controls whether the noise segment that is measured has the same duration 
than the signal (if <code>TRUE</code>, default <code>FALSE</code>). If <code>TRUE</code> then 'mar' argument is ignored.</p></dd>


<dt>in.dB</dt>
<dd><p>Logical. Controls whether the signal-to-noise ratio is returned in decibels (20*log10(SNR)). 
Default is <code>TRUE</code>.</p></dd>


<dt>before</dt>
<dd><p>Logical. If <code>TRUE</code> noise is only measured right before the signal (instead of before and after). Default is <code>FALSE</code>.</p></dd>


<dt>lim.dB</dt>
<dd><p>Logical. If <code>TRUE</code> the lowest signal-to-noise would be limited to -40 dB (if <code>in.dB = TRUE</code>). This would remove NA's that can be produced when noise segments have a higher amplitude than the signal 
itself. Default is <code>TRUE</code>.</p></dd>


<dt>bp</dt>
<dd><p>Numeric vector of length 2 giving the lower and upper limits of a frequency bandpass filter (in kHz). Default is <code>NULL</code>.</p></dd>


<dt>wl</dt>
<dd><p>A numeric vector of length 1 specifying the window length of the spectrogram for applying bandpass. Default 
  is 10. Ignored if <code>bp = NULL</code>. It can also be
set globally using the 'wl' option (see <code><a href="warbleR_options.html">warbleR_options</a></code>).
 Note that lower values will increase time resolution, which is more important for signal-to-noise ratio calculations.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Data frame similar to <code><a href="auto_detec.html">auto_detec</a></code> output, but also includes a new variable 
with the signal-to-noise values.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Signal-to-noise ratio (SNR) is a measure of the level of a desired signal compared to 
 background noise. The function divides the mean amplitude of the signal by 
  the mean amplitude of the background noise adjacent to the signal. 
  A general margin to apply before and after the acoustic signal must 
  be specified. Setting margins for individual signals that have been 
  previously clipped from larger files may take some optimization, as 
  for calls within a larger file that are irregularly separated. When
  margins overlap with another acoustic signal nearby, the signal-to-noise 
  ratio (SNR) will be inaccurate. Any SNR less than or equal to one suggests 
  background noise is equal to or overpowering the acoustic signal.
  <code><a href="snr_spectrograms.html">snr_spectrograms</a></code> can be used to troubleshoot different noise margins.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Araya-Salas, M., &amp; Smith-Vidaurre, G. (2017). warbleR: An R package to streamline analysis of animal acoustic signals. Methods in Ecology and Evolution, 8(2), 184-191.
<a href="https://en.wikipedia.org/wiki/Signal-to-noise_ratio" class="external-link">Wikipedia: Signal-to-noise ratio</a></p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Marcelo Araya-Salas (<a href="mailto:marcelo.araya@ucr.ac.cr">marcelo.araya@ucr.ac.cr</a>) and Grace Smith Vidaurre</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="op">{</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span>list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Phae.long1"</span>,<span class="st">"lbh_selec_table"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/tuneR/man/writeWave.html" class="external-link">writeWave</a></span><span class="op">(</span><span class="va">Phae.long1</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"Phae.long1.wav"</span><span class="op">)</span><span class="op">)</span> <span class="co">#save sound files </span>

<span class="co"># specifying the correct margin is important</span>
<span class="co"># use snr_spectrograms to troubleshoot margins for sound files</span>
<span class="fu">sig2noise</span><span class="op">(</span><span class="va">lbh_selec_table</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"Phae.long1"</span>, <span class="va">lbh_selec_table</span><span class="op">$</span><span class="va">sound.files</span><span class="op">)</span>, <span class="op">]</span>, mar <span class="op">=</span> <span class="fl">0.2</span>, 
path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>

<span class="co"># this smaller margin doesn't overlap neighboring signals</span>
<span class="fu">sig2noise</span><span class="op">(</span><span class="va">lbh_selec_table</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"Phae.long1"</span>, <span class="va">lbh_selec_table</span><span class="op">$</span><span class="va">sound.files</span><span class="op">)</span>, <span class="op">]</span>, mar <span class="op">=</span> <span class="fl">0.1</span>, 
path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span>

</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Marcelo Araya-Salas, Grace Smith-Vidaurre.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

