<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Access 'Xeno-Canto' recordings and metadata — query_xc • warbleR</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Access 'Xeno-Canto' recordings and metadata — query_xc" />
<meta property="og:description" content="query_xc downloads recordings and metadata from Xeno-Canto." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">warbleR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.28</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="divider"></li>
    <li class="dropdown-header">vignettes</li>
    <li>
      <a href="../articles/Intro_to_warbleR.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;Introduction to warbleR&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
    <li>
      <a href="../articles/warbleR_workflow_01.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Import sound files and select signals&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
    <li>
      <a href="../articles/warbleR_workflow_02.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Visual inspection and signal classification&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
    <li>
      <a href="../articles/warbleR_workflow_03.html">&lt;center&gt;&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Acoustic (dis)similarity, coordinated singing and simulating songs&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/maRce10/warbleR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Access 'Xeno-Canto' recordings and metadata</h1>
    <small class="dont-index">Source: <a href='https://github.com/maRce10/warbleR/blob/master/R/query_xc.R'><code>R/query_xc.R</code></a></small>
    <div class="hidden name"><code>query_xc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>query_xc</code> downloads recordings and metadata from <a href='https://www.xeno-canto.org/'>Xeno-Canto</a>.</p>
    </div>

    <pre class="usage"><span class='fu'>query_xc</span><span class='op'>(</span><span class='va'>qword</span>, download <span class='op'>=</span> <span class='cn'>FALSE</span>, X <span class='op'>=</span> <span class='cn'>NULL</span>, file.name <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Genus"</span>, <span class='st'>"Specific_epithet"</span><span class='op'>)</span>, 
parallel <span class='op'>=</span> <span class='fl'>1</span>, path <span class='op'>=</span> <span class='cn'>NULL</span>, pb <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>qword</th>
      <td><p>Character vector of length one indicating the genus, or genus and
species, to query 'Xeno-Canto' database. For example, <em>Phaethornis</em> or <em>Phaethornis longirostris</em>. 
More complex queries can be done by using search terms that follow the 
xeno-canto advance query syntax.This syntax uses tags to search within a particular aspect of the recordings 
(e.g. country, location, sound type). Tags are of the form tag:searchterm'. For instance, 'type:song' 
will search for all recordings in which the sound type description contains the word 'song'. 
Several tags can be included in the same query. The query "phaethornis cnt:belize' will only return 
results for birds in the genus <em>Phaethornis</em> that were recorded in  Belize. 
See <a href='https://www.xeno-canto.org/help/search'>Xeno-Canto's search help</a> for a full description and see examples below 
for queries using terms with more than one word.</p></td>
    </tr>
    <tr>
      <th>download</th>
      <td><p>Logical argument. If <code>FALSE</code> only the recording file names and
associated metadata are downloaded. If <code>TRUE</code>, recordings are also downloaded to the working
directory as .mp3 files. Default is <code>FALSE</code>. Note that if the recording is already in the 
working directory (as when the downloading process has been interrupted) it will be skipped. 
Hence, resuming downloading processes will not start from scratch.</p></td>
    </tr>
    <tr>
      <th>X</th>
      <td><p>Data frame with a 'Recording_ID' column and any other column listed in the file.name argument. Only the recordings listed in the data frame 
will be download (<code>download</code> argument is automatically set to <code>TRUE</code>). This can be used to select
the recordings to be downloaded based on their attributes.</p></td>
    </tr>
    <tr>
      <th>file.name</th>
      <td><p>Character vector indicating the tags (or column names) to be included in the sound file names (if download = <code>TRUE</code>). Several tags can be included. If <code>NULL</code> only the 'Xeno-Canto' recording identification number ("Recording_ID") is used. Default is c("Genus", "Specific_epithet").
Note that recording id is always used (whether or not is listed by users) to avoid duplicated names.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>Numeric. Controls whether parallel computing is applied when downloading mp3 files.
It specifies the number of cores to be used. Default is 1 (i.e. no parallel computing). Applied both when getting metadata and downloading files.</p></td>
    </tr>
    <tr>
      <th>path</th>
      <td><p>Character string containing the directory path where the sound files will be saved. 
If <code>NULL</code> (default) then the current working directory is used.</p></td>
    </tr>
    <tr>
      <th>pb</th>
      <td><p>Logical argument to control progress bar. Default is <code>TRUE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>If X is not provided the function returns a data frame with the following recording information: recording ID, Genus, Specific epithet, Subspecies, English name, Recordist, Country, Locality, Latitude, Longitude, Vocalization type, Audio file, License, URL, Quality, Time, Date. Sound files in .mp3 format are downloaded into the working directory if download = <code>TRUE</code> or if X is provided; a column indicating the  names of the downloaded files is included in the output data frame.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This function queries for avian vocalization recordings in the open-access
online repository <a href='https://www.xeno-canto.org/'>Xeno-Canto</a>. It can return recordings metadata
or download the associated sound files. Complex queries can be done by using search terms that follow the 
 xeno-canto advance query syntax (check "qword" argument description). 
 Files are double-checked after downloading and "empty" files are re-downloaded. 
 File downloading process can be interrupted and resume later as long as the working directory is the same.
 Maps of recording coordinates can be produced using 
<code><a href='map_xc.html'>map_xc</a></code>.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Araya-Salas, M., &amp; Smith-Vidaurre, G. (2017). warbleR: An R package to streamline analysis of animal acoustic signals. Methods in Ecology and Evolution, 8(2), 184-191.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='map_xc.html'>map_xc</a></code>, 
<a href='https://marce10.github.io/2016/12/22/Download_a_single_recording_for_each_species_in_a_site_from_Xeno-Canto.html'>blog post on accessing Xeno-Canto recordings</a></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Marcelo Araya-Salas (<a href='mailto:marcelo.araya@ucr.ac.cr'>marcelo.araya@ucr.ac.cr</a>)</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># search without downloading</span>
<span class='va'>df1</span> <span class='op'>&lt;-</span> <span class='fu'>query_xc</span><span class='op'>(</span>qword <span class='op'>=</span> <span class='st'>'Phaethornis anthophilus'</span>, download <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/View.html'>View</a></span><span class='op'>(</span><span class='va'>df1</span><span class='op'>)</span>

<span class='co'># downloading files</span>
<span class='fu'>query_xc</span><span class='op'>(</span>qword <span class='op'>=</span> <span class='st'>'Phaethornis anthophilus'</span>, download <span class='op'>=</span> <span class='cn'>TRUE</span>, path <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># check this folder</span>
<span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='co'>## search using xeno-canto advance query ###</span>
<span class='va'>orth.pap</span> <span class='op'>&lt;-</span> <span class='fu'>query_xc</span><span class='op'>(</span>qword <span class='op'>=</span> <span class='st'>'gen:orthonyx cnt:papua loc:tari'</span>, download <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
 
<span class='co'># download file using the output data frame as input</span>
<span class='fu'>query_xc</span><span class='op'>(</span>X <span class='op'>=</span> <span class='va'>orth.pap</span>, path <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># use quotes for queries with more than 1 word (e.g. Costa Rica),note that the </span>
<span class='co'># single quotes are used for the whole 'qword' and double quotes for the 2-word term inside</span>
<span class='co'>#Phaeochroa genus in Costa Rica </span>
<span class='va'>phae.cr</span> <span class='op'>&lt;-</span> <span class='fu'>query_xc</span><span class='op'>(</span>qword <span class='op'>=</span> <span class='st'>'gen:phaeochroa cnt:"costa rica"'</span>, download <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>

<span class='co'># several terms can be searched for in the same field</span>
<span class='co'># search for all female songs in sound type</span>
<span class='va'>femsong</span> <span class='op'>&lt;-</span> <span class='fu'>query_xc</span><span class='op'>(</span>qword <span class='op'>=</span> <span class='st'>'type:song type:female'</span>, download <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span>
<span class='op'>}</span>

</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Marcelo Araya-Salas, Grace Smith-Vidaurre.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


