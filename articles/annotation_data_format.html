<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="warbleR">
<title>
<font size="7"><b>warbleR: Annotation data format</b></font> • warbleR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="&lt;font size=">
</head>
<body>
<b>warbleR: Annotation data format</b>" /&gt;
<meta property="og:description" content="warbleR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">warbleR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.30</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>vignettes</h6>
    <a class="dropdown-item" href="../articles/Intro_to_warbleR.html">&lt;font size="7"&gt;&lt;b&gt;Introduction to warbleR&lt;/b&gt;&lt;/font&gt;</a>
    <a class="dropdown-item" href="../articles/annotation_data_format.html">&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Annotation data format&lt;/b&gt;&lt;/font&gt;</a>
    <a class="dropdown-item" href="../articles/warbleR_workflow_01.html">&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Import sound files and select signals&lt;/b&gt;&lt;/font&gt;</a>
    <a class="dropdown-item" href="../articles/warbleR_workflow_02.html">&lt;font size="7"&gt;&lt;b&gt;"warbleR&amp;#58; Visual inspection and signal classification&lt;/b&gt;&lt;/font&gt;</a>
    <a class="dropdown-item" href="../articles/warbleR_workflow_03.html">&lt;font size="7"&gt;&lt;b&gt;warbleR&amp;#58; Acoustic (dis)similarity, coordinated singing and simulating songs&lt;/b&gt;&lt;/font&gt;</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/maRce10/warbleR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="annotation_data_format_files/kePrint-0.0.1/kePrint.js"></script><link href="annotation_data_format_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1><font size="7"><b>warbleR: Annotation data format</b></font></h1>
                        <h4 data-toc-skip class="author"><a href="https://marce10.github.io" class="external-link">Marcelo
Araya-Salas, PhD</a></h4>
            
            <h4 data-toc-skip class="date">2024-02-28</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/maRce10/warbleR/blob/HEAD/vignettes/annotation_data_format.Rmd" class="external-link"><code>vignettes/annotation_data_format.Rmd</code></a></small>
      <div class="d-none name"><code>annotation_data_format.Rmd</code></div>
    </div>

    
    
<p> </p>
<!-- skyblue box -->
<div class="alert alert-info">
<p>This vignette explains in detail the structure of the
<strong>R</strong> data objects contain sound file annotation data that
are required by the package <strong>warbleR</strong>.</p>
</div>
<p> </p>
<p><img src="warbleR_sticker.png" alt="warbleR logo" align="right" width="25%" height="25%"></p>
<p>An annotation table (or selection table in Raven’s and warbleR’s
terminology) is a data set that contains information about the location
in time (and sometimes in frequency) of the sounds of interest in one or
more sound files. <strong>warbleR</strong> can take sound file
annotations represented in the following <strong>R</strong> objects:</p>
<ul>
<li>Data frames</li>
<li>Selection tables</li>
<li>Extended selection tables</li>
</ul>
<p>The last 2 are annotation specific R classes included in
<strong>warbleR</strong>. Here we described the basic structure of these
objects and how they can be created.</p>
<div class="section level2">
<h2 id="data-frames">Data frames<a class="anchor" aria-label="anchor" href="#data-frames"></a>
</h2>
<p>Data frames with sound file annotations must contain the following
columns:</p>
<ol style="list-style-type: decimal">
<li>‘sound.files’: character or factor column name of the sound files
including the file extension (e.g. “rec_1.wav”)</li>
<li>‘selec’: numeric, character or factor column with a unique
identifier (at least within each sound file) for each annotation
(e.g. 1, 2, 3 or “a”, “b”, “c”)</li>
<li>‘start’: the start position in time of an annotated sound (in
seconds)</li>
<li>‘end’: the end position in time of an annotated sound (in
seconds)</li>
</ol>
<table class="table table table-striped" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;">
sound.files
</th>
<th style="text-align:center;">
selec
</th>
<th style="text-align:center;">
start
</th>
<th style="text-align:center;">
end
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
sound_file_1.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
3.02
</td>
<td style="text-align:center;">
5.58
</td>
</tr>
<tr>
<td style="text-align:center;">
sound_file_1.wav
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
7.92
</td>
<td style="text-align:center;">
9.00
</td>
</tr>
<tr>
<td style="text-align:center;">
sound_file_2.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
4.21
</td>
<td style="text-align:center;">
5.34
</td>
</tr>
<tr>
<td style="text-align:center;">
sound_file_2.wav
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
8.85
</td>
<td style="text-align:center;">
11.57
</td>
</tr>
</tbody>
</table>
<p>Data frames containing annotations can also include the following
optional columns:</p>
<ul>
<li><ol style="list-style-type: decimal">
<li>‘bottom.freq’: numeric column with the bottom frequency of the
frequency range of the annotation (in kHz)</li>
</ol></li>
<li><ol style="list-style-type: decimal">
<li>‘top.freq’: numeric column with the top frequency of the frequency
range of the annotation (in kHz)</li>
</ol></li>
<li><ol style="list-style-type: decimal">
<li>‘channel’: numeric column with the number of the channel in which
the annotation is found in a multi-channel sound file (by default is
1)</li>
</ol></li>
</ul>
<table class="table table table-striped" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;">
sound.files
</th>
<th style="text-align:center;">
selec
</th>
<th style="text-align:center;">
start
</th>
<th style="text-align:center;">
end
</th>
<th style="text-align:center;">
bottom.freq
</th>
<th style="text-align:center;">
top.freq
</th>
<th style="text-align:center;">
channel
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
sound_file_1.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
3.02
</td>
<td style="text-align:center;">
5.58
</td>
<td style="text-align:center;">
5.46
</td>
<td style="text-align:center;">
10.22
</td>
<td style="text-align:center;">
1
</td>
</tr>
<tr>
<td style="text-align:center;">
sound_file_1.wav
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
7.92
</td>
<td style="text-align:center;">
9.00
</td>
<td style="text-align:center;">
3.73
</td>
<td style="text-align:center;">
9.36
</td>
<td style="text-align:center;">
1
</td>
</tr>
<tr>
<td style="text-align:center;">
sound_file_2.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
4.21
</td>
<td style="text-align:center;">
5.34
</td>
<td style="text-align:center;">
4.31
</td>
<td style="text-align:center;">
9.40
</td>
<td style="text-align:center;">
1
</td>
</tr>
<tr>
<td style="text-align:center;">
sound_file_2.wav
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
8.85
</td>
<td style="text-align:center;">
11.57
</td>
<td style="text-align:center;">
4.55
</td>
<td style="text-align:center;">
9.11
</td>
<td style="text-align:center;">
1
</td>
</tr>
</tbody>
</table>
<p>The sample data “lbh_selec_table” contains a data frame with
annotations with the format expected by <strong>warbleR</strong>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://marce10.github.io/warbleR/">warbleR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"lbh_selec_table"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">lbh_selec_table</span><span class="op">)</span></span></code></pre></div>
<table class="table table table-striped" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:center;">
sound.files
</th>
<th style="text-align:center;">
channel
</th>
<th style="text-align:center;">
selec
</th>
<th style="text-align:center;">
start
</th>
<th style="text-align:center;">
end
</th>
<th style="text-align:center;">
bottom.freq
</th>
<th style="text-align:center;">
top.freq
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:center;">
Phae.long1.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
1.169
</td>
<td style="text-align:center;">
1.342
</td>
<td style="text-align:center;">
2.22
</td>
<td style="text-align:center;">
8.60
</td>
</tr>
<tr>
<td style="text-align:center;">
Phae.long1.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
2.158
</td>
<td style="text-align:center;">
2.321
</td>
<td style="text-align:center;">
2.17
</td>
<td style="text-align:center;">
8.81
</td>
</tr>
<tr>
<td style="text-align:center;">
Phae.long1.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
0.343
</td>
<td style="text-align:center;">
0.518
</td>
<td style="text-align:center;">
2.22
</td>
<td style="text-align:center;">
8.76
</td>
</tr>
<tr>
<td style="text-align:center;">
Phae.long2.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
0.160
</td>
<td style="text-align:center;">
0.292
</td>
<td style="text-align:center;">
2.32
</td>
<td style="text-align:center;">
8.82
</td>
</tr>
<tr>
<td style="text-align:center;">
Phae.long2.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
1.457
</td>
<td style="text-align:center;">
1.583
</td>
<td style="text-align:center;">
2.28
</td>
<td style="text-align:center;">
8.89
</td>
</tr>
<tr>
<td style="text-align:center;">
Phae.long3.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
0.627
</td>
<td style="text-align:center;">
0.758
</td>
<td style="text-align:center;">
3.01
</td>
<td style="text-align:center;">
8.82
</td>
</tr>
<tr>
<td style="text-align:center;">
Phae.long3.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
1.974
</td>
<td style="text-align:center;">
2.104
</td>
<td style="text-align:center;">
2.78
</td>
<td style="text-align:center;">
8.89
</td>
</tr>
<tr>
<td style="text-align:center;">
Phae.long3.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
0.123
</td>
<td style="text-align:center;">
0.255
</td>
<td style="text-align:center;">
2.32
</td>
<td style="text-align:center;">
9.31
</td>
</tr>
<tr>
<td style="text-align:center;">
Phae.long4.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
1.517
</td>
<td style="text-align:center;">
1.662
</td>
<td style="text-align:center;">
2.51
</td>
<td style="text-align:center;">
9.22
</td>
</tr>
<tr>
<td style="text-align:center;">
Phae.long4.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
2
</td>
<td style="text-align:center;">
2.933
</td>
<td style="text-align:center;">
3.077
</td>
<td style="text-align:center;">
2.58
</td>
<td style="text-align:center;">
10.23
</td>
</tr>
<tr>
<td style="text-align:center;">
Phae.long4.wav
</td>
<td style="text-align:center;">
1
</td>
<td style="text-align:center;">
3
</td>
<td style="text-align:center;">
0.145
</td>
<td style="text-align:center;">
0.290
</td>
<td style="text-align:center;">
2.58
</td>
<td style="text-align:center;">
9.74
</td>
</tr>
</tbody>
</table>
<p> </p>
<p>Typically, annotations are created in other sound analysis programs
(mainly, Raven, Avisoft, Syrinx and Audacity) and then imported into
<em>R</em>. We recommend annotating sound files in <a href="http://www.birds.cornell.edu/brp/raven/RavenOverview.html" class="external-link">Raven
sound analysis software</a> (<a href="http://www.birds.cornell.edu" class="external-link">Cornell Lab of Ornithology</a>) and
then importing them into <strong>R</strong> with the package <a href="https://marce10.github.io/Rraven/" class="external-link"><strong>Rraven</strong></a>.
This package facilitates data exchange between R and <a href="http://www.birds.cornell.edu/brp/raven/RavenOverview.html" class="external-link">Raven
sound analysis software</a> and allow users to import annotation data
into R using the <strong>warbleR</strong> annotation format (see
argument ‘warbler.format’ in the function <code>imp_raven()</code>).</p>
<p> </p>
<!-- light brown box -->
<div class="alert alert-warning">
<p>Data frames containing annotations always refer to sound files.
Therefore, when using data frames users <em>must always indicate the
location of the sound files</em> to every <strong>warbleR</strong>
function when providing annotations in this format.</p>
</div>
</div>
<div class="section level2">
<h2 id="warbler-annotation-formats">warbleR annotation formats<a class="anchor" aria-label="anchor" href="#warbler-annotation-formats"></a>
</h2>
<div class="section level4">
<h4 id="selection-tables">Selection tables<a class="anchor" aria-label="anchor" href="#selection-tables"></a>
</h4>
<p>These objects are created with the <code><a href="../reference/selection_table.html">selection_table()</a></code>
function. The function takes data frames containing annotation data as
in the format described above. Therefore the same mandatory and optional
columns are used by selection tables. The function verifies if the
information is consistent (see the function <code><a href="../reference/check_sels.html">check_sels()</a></code>
for details) and saves the ‘diagnostic’ metadata as an attribute in the
output object. Selection tables are basically data frames in which the
information contained has been double checked to ensure it can be read
by other <strong>warbleR</strong> functions.</p>
<p>Selection tables are created by the function
<code><a href="../reference/selection_table.html">selection_table()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># write example sound files in temporary directory</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/tuneR/man/writeWave.html" class="external-link">writeWave</a></span><span class="op">(</span><span class="va">Phae.long1</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"Phae.long1.wav"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/tuneR/man/writeWave.html" class="external-link">writeWave</a></span><span class="op">(</span><span class="va">Phae.long2</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"Phae.long2.wav"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/tuneR/man/writeWave.html" class="external-link">writeWave</a></span><span class="op">(</span><span class="va">Phae.long3</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"Phae.long3.wav"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/tuneR/man/writeWave.html" class="external-link">writeWave</a></span><span class="op">(</span><span class="va">Phae.long4</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"Phae.long4.wav"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span><span class="va">st</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/selection_table.html">selection_table</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">lbh_selec_table</span>, path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">st</span><span class="op">)</span></span></code></pre></div>
<table class="table table table-striped" style="font-size: 14px; margin-left: auto; margin-right: auto;">
<thead><tr>
<th style="text-align:left;">
sound.files
</th>
<th style="text-align:right;">
channel
</th>
<th style="text-align:right;">
selec
</th>
<th style="text-align:right;">
start
</th>
<th style="text-align:right;">
end
</th>
<th style="text-align:right;">
bottom.freq
</th>
<th style="text-align:right;">
top.freq
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Phae.long1.wav
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1.169
</td>
<td style="text-align:right;">
1.342
</td>
<td style="text-align:right;">
2.22
</td>
<td style="text-align:right;">
8.60
</td>
</tr>
<tr>
<td style="text-align:left;">
Phae.long1.wav
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2.158
</td>
<td style="text-align:right;">
2.321
</td>
<td style="text-align:right;">
2.17
</td>
<td style="text-align:right;">
8.81
</td>
</tr>
<tr>
<td style="text-align:left;">
Phae.long1.wav
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.343
</td>
<td style="text-align:right;">
0.518
</td>
<td style="text-align:right;">
2.22
</td>
<td style="text-align:right;">
8.76
</td>
</tr>
<tr>
<td style="text-align:left;">
Phae.long2.wav
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.160
</td>
<td style="text-align:right;">
0.292
</td>
<td style="text-align:right;">
2.32
</td>
<td style="text-align:right;">
8.82
</td>
</tr>
<tr>
<td style="text-align:left;">
Phae.long2.wav
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.457
</td>
<td style="text-align:right;">
1.583
</td>
<td style="text-align:right;">
2.28
</td>
<td style="text-align:right;">
8.89
</td>
</tr>
<tr>
<td style="text-align:left;">
Phae.long3.wav
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.627
</td>
<td style="text-align:right;">
0.758
</td>
<td style="text-align:right;">
3.01
</td>
<td style="text-align:right;">
8.82
</td>
</tr>
<tr>
<td style="text-align:left;">
Phae.long3.wav
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.974
</td>
<td style="text-align:right;">
2.104
</td>
<td style="text-align:right;">
2.78
</td>
<td style="text-align:right;">
8.89
</td>
</tr>
<tr>
<td style="text-align:left;">
Phae.long3.wav
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.123
</td>
<td style="text-align:right;">
0.255
</td>
<td style="text-align:right;">
2.32
</td>
<td style="text-align:right;">
9.31
</td>
</tr>
<tr>
<td style="text-align:left;">
Phae.long4.wav
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1.517
</td>
<td style="text-align:right;">
1.662
</td>
<td style="text-align:right;">
2.51
</td>
<td style="text-align:right;">
9.22
</td>
</tr>
<tr>
<td style="text-align:left;">
Phae.long4.wav
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2.933
</td>
<td style="text-align:right;">
3.077
</td>
<td style="text-align:right;">
2.58
</td>
<td style="text-align:right;">
10.23
</td>
</tr>
<tr>
<td style="text-align:left;">
Phae.long4.wav
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0.145
</td>
<td style="text-align:right;">
0.290
</td>
<td style="text-align:right;">
2.58
</td>
<td style="text-align:right;">
9.74
</td>
</tr>
</tbody>
</table>
<p>Selection table is an especific object class that have their own
printing method:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">st</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "selection_table" "data.frame"     </code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">st</span></span></code></pre></div>
<pre><code> [30mObject of class  [1m'selection_table' [22m [39m</code></pre>
<pre><code> [90m* The output of the following call: [39m</code></pre>
<pre><code> [90m [3mselection_table(X = lbh_selec_table, path = tempdir(), pb = FALSE) [23m [39m</code></pre>
<pre><code> [90m [1m
Contains: [22m *  A selection table data frame with 11 rows and 7 columns: [39m</code></pre>
<pre><code> [90m|sound.files    | channel| selec| start|   end| bottom.freq| [39m</code></pre>
<pre><code> [90m|:--------------|-------:|-----:|-----:|-----:|-----------:| [39m</code></pre>
<pre><code> [90m|Phae.long1.wav |       1|     1| 1.169| 1.342|        2.22| [39m</code></pre>
<pre><code> [90m|Phae.long1.wav |       1|     2| 2.158| 2.321|        2.17| [39m</code></pre>
<pre><code> [90m|Phae.long1.wav |       1|     3| 0.343| 0.518|        2.22| [39m</code></pre>
<pre><code> [90m|Phae.long2.wav |       1|     1| 0.160| 0.292|        2.32| [39m</code></pre>
<pre><code> [90m|Phae.long2.wav |       1|     2| 1.457| 1.583|        2.28| [39m</code></pre>
<pre><code> [90m|Phae.long3.wav |       1|     1| 0.627| 0.758|        3.01| [39m</code></pre>
<pre><code> [90m... 1 more column(s) (top.freq) [39m</code></pre>
<pre><code> [90m and 5 more row(s) [39m</code></pre>
<pre><code> [90m
* A data frame (check.results) with 11 rows generated by check_sels() (as attribute) [39m</code></pre>
<pre><code> [90mcreated by warbleR 1.1.30 [39m</code></pre>
<p> </p>
<p>Note that the path to the sound files must be provided. This is
necessary in order to verify that the data provided conforms to the
characteristics of the audio files.</p>
<p> </p>
<!-- light brown box -->
<div class="alert alert-warning">
<p>Selection table also refer to sound files. Therefore, users
<strong>must always indicate the location of the sound files to every
<em>warbleR</em> function</strong> when providing annotations in this
format</p>
</div>
</div>
<div class="section level4">
<h4 id="extended-selection-tables">Extended selection tables<a class="anchor" aria-label="anchor" href="#extended-selection-tables"></a>
</h4>
<p>Extended selection tables are annotations that include both the
acoustic and annotation data. This an specific object class,
<em>extended_selection_table</em>, that include a list of ‘wave’ objects
corresponding to each of the selections in the data. Therefore, the
function <strong>transforms the selection table into self-contained
objects</strong> since the original sound files are no longer needed to
perform most of the acoustic analysis in <strong>warbleR</strong>. This
can facilitate the storage and exchange of (bio)acoustic data. This
format can also speed up analyses, since it is not necessary to read the
sound files every time the data is analyzed.</p>
<p>The <code><a href="../reference/selection_table.html">selection_table()</a></code> function also creates extended
selection tables. To do this, users must set the argument
<code>extended = TRUE</code> (otherwise, the class would be a selection
table). The following code converts the exaample ‘lbh_selec_table’ data
into an extended selection table:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ext_st</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/selection_table.html">selection_table</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">lbh_selec_table</span>, pb <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>          extended <span class="op">=</span> <span class="cn">TRUE</span>, path <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Extended selection table is an especific object class that have their
own printing method:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">ext_st</span><span class="op">)</span></span></code></pre></div>
<pre><code>[1] "extended_selection_table" "data.frame"              </code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ext_st</span></span></code></pre></div>
<pre><code> [30mObject of class  [1m'extended_selection_table' [22m [39m</code></pre>
<pre><code> [90m* The output of the following call: [39m</code></pre>
<pre><code> [90m [3mselection_table(X = lbh_selec_table, path = tempdir(), extended = TRUE,  pb = FALSE) [23m [39m</code></pre>
<pre><code> [90m [1m
Contains: [22m 
*  A selection table data frame with 11 row(s) and 7 columns: [39m</code></pre>
<pre><code> [90m|sound.files      | channel| selec| start|   end| bottom.freq| [39m</code></pre>
<pre><code> [90m|:----------------|-------:|-----:|-----:|-----:|-----------:| [39m</code></pre>
<pre><code> [90m|Phae.long1.wav_1 |       1|     1|   0.1| 0.273|        2.22| [39m</code></pre>
<pre><code> [90m|Phae.long1.wav_2 |       1|     1|   0.1| 0.263|        2.17| [39m</code></pre>
<pre><code> [90m|Phae.long1.wav_3 |       1|     1|   0.1| 0.275|        2.22| [39m</code></pre>
<pre><code> [90m|Phae.long2.wav_1 |       1|     1|   0.1| 0.233|        2.32| [39m</code></pre>
<pre><code> [90m|Phae.long2.wav_2 |       1|     1|   0.1| 0.226|        2.28| [39m</code></pre>
<pre><code> [90m|Phae.long3.wav_1 |       1|     1|   0.1| 0.231|        3.01| [39m</code></pre>
<pre><code> [90m... 1 more column(s) (top.freq) [39m</code></pre>
<pre><code> [90m and 5 more row(s) [39m</code></pre>
<pre><code> [90m
* 11 wave object(s) (as attributes):  [39m</code></pre>
<pre><code> [90mPhae.long1.wav_1, Phae.long1.wav_2, Phae.long1.wav_3, Phae.long2.wav_1, Phae.long2.wav_2, Phae.long3.wav_1 [39m</code></pre>
<pre><code> [90m... and 5 more [39m</code></pre>
<pre><code> [90m
* A data frame (check.results) with 11 rows generated by check_sels() (as attribute) [39m</code></pre>
<pre><code> [90m
The selection table was created [3m [1m by element  [22m [23m(see 'class_extended_selection_table') [39m</code></pre>
<pre><code> [90m* 1 sampling rate(s) (in kHz):  [1m22.5 [22m [39m</code></pre>
<pre><code> [90m* 1 bit depth(s):  [1m16 [22m [39m</code></pre>
<pre><code> [90m* Created by warbleR 1.1.30 [39m</code></pre>
<p>The wave objects contained in the <em>extended_selection_table</em>
can be easily extracted using the <strong>warbleR</strong> function <a href="https://marce10.github.io/warbleR/reference/read_sound_file.html">read_sound_file</a>:</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">w1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_sound_file.html">read_sound_file</a></span><span class="op">(</span><span class="va">ext_st</span>, index <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="va">w1</span></span></code></pre></div>
<pre><code>
Wave Object
    Number of Samples:      3893
    Duration (seconds):     0.17
    Samplingrate (Hertz):   22500
    Channels (Mono/Stereo): Mono
    PCM (integer format):   TRUE
    Bit (8/16/24/32/64):    16 </code></pre>
<p>The index argument indicates the row of the selection that will be
read.</p>
<p>This data is ready to be used. For instance, here I create a
multipanel graph with the spectrograms of the first 6 selections:</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="va">wv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_sound_file.html">read_sound_file</a></span><span class="op">(</span>X <span class="op">=</span> <span class="va">ext_st</span>, index <span class="op">=</span> <span class="va">i</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu">seewave</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/seewave/man/spectro.html" class="external-link">spectro</a></span><span class="op">(</span><span class="va">wv</span>, wl <span class="op">=</span> <span class="fl">250</span>, grid <span class="op">=</span> <span class="cn">FALSE</span>, scale <span class="op">=</span> <span class="cn">FALSE</span>, axisX <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>          axisY <span class="op">=</span> <span class="cn">FALSE</span>, ovlp <span class="op">=</span> <span class="fl">90</span>, flim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">11</span><span class="op">)</span>, </span>
<span>          palette <span class="op">=</span> <span class="fu">viridis</span><span class="fu">::</span><span class="va"><a href="https://sjmgarnier.github.io/viridisLite/reference/viridis.html" class="external-link">viridis</a></span>,</span>
<span>          collevels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">110</span>, <span class="fl">0</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p><img src="annotation_data_format_files/figure-html/extn.sel_21-1.png" width="750"></p>
<hr>
</div>
<div class="section level3">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h3>
<ul>
<li>Araya-Salas (2017), <em>Rraven: connecting R and Raven bioacoustic
software</em>. R package version 1.0.2.</li>
</ul>
<hr>
<p><font size="4">Session information</font></p>
<pre><code>R version 4.3.2 (2023-10-31)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 22.04.4 LTS

Matrix products: default
BLAS:   /usr/lib/x86_64-linux-gnu/openblas-pthread/libblas.so.3 
LAPACK: /usr/lib/x86_64-linux-gnu/openblas-pthread/libopenblasp-r0.3.20.so;  LAPACK version 3.10.0

locale:
 [1] LC_CTYPE=C.UTF-8       LC_NUMERIC=C           LC_TIME=C.UTF-8        LC_COLLATE=C.UTF-8    
 [5] LC_MONETARY=C.UTF-8    LC_MESSAGES=C.UTF-8    LC_PAPER=C.UTF-8       LC_NAME=C             
 [9] LC_ADDRESS=C           LC_TELEPHONE=C         LC_MEASUREMENT=C.UTF-8 LC_IDENTIFICATION=C   

time zone: UTC
tzcode source: system (glibc)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] kableExtra_1.4.0   warbleR_1.1.30     NatureSounds_1.0.4 knitr_1.45         seewave_2.2.3     
[6] tuneR_1.4.6       

loaded via a namespace (and not attached):
 [1] gtable_0.3.4      rjson_0.2.21      xfun_0.42         bslib_0.6.1       ggplot2_3.5.0    
 [6] vctrs_0.6.5       tools_4.3.2       bitops_1.0-7      parallel_4.3.2    tibble_3.2.1     
[11] proxy_0.4-27      fansi_1.0.6       highr_0.10        pkgconfig_2.0.3   desc_1.4.3       
[16] lifecycle_1.0.4   compiler_4.3.2    stringr_1.5.1     textshaping_0.3.7 brio_1.1.4       
[21] munsell_0.5.0     htmltools_0.5.7   sass_0.4.8        RCurl_1.98-1.14   yaml_2.3.8       
[26] pkgdown_2.0.7     pillar_1.9.0      jquerylib_0.1.4   MASS_7.3-60       cachem_1.0.8     
[31] viridis_0.6.5     digest_0.6.34     stringi_1.8.3     purrr_1.0.2       fastmap_1.1.1    
[36] grid_4.3.2        colorspace_2.1-0  cli_3.6.2         magrittr_2.0.3    utf8_1.2.4       
[41] scales_1.3.0      rmarkdown_2.25    signal_1.8-0      gridExtra_2.3     ragg_1.2.7       
[46] memoise_2.0.1     pbapply_1.7-2     evaluate_0.23     dtw_1.23-1        fftw_1.0-8       
[51] testthat_3.2.1    viridisLite_0.4.2 rlang_1.1.3       Rcpp_1.0.12       glue_1.7.0       
[56] xml2_1.3.6        svglite_2.1.3     rstudioapi_0.15.0 jsonlite_1.8.8    R6_2.5.1         
[61] systemfonts_1.0.5 fs_1.6.3         </code></pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Marcelo Araya-Salas, Grace Smith-Vidaurre.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  
</body>
</html>
